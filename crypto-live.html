data || [];
        renderTable(allAssets);

        loader.style.display = "none";
        table.style.display = "table";
      } catch (err) {
        console.error(err);
        loader.style.display = "none";
        errorBox.style.display = "block";
        errorBox.textContent =
          "Failed to load live data. Try refreshing the page or come back later.";
        statusText.textContent = "Error connecting to live feed.";
      }
    }

    function applySearch() {
      const q = searchInput.value.trim().toLowerCase();
      if (!q) {
        renderTable(allAssets);
        return;
      }
      const filtered = allAssets.filter(
        (a) =>
          (a.name && a.name.toLowerCase().includes(q)) ||
          (a.symbol && a.symbol.toLowerCase().includes(q)) ||
          (a.id && a.id.toLowerCase().includes(q))
      );
      renderTable(filtered);
    }

    searchInput.addEventListener("input", () => {
      applySearch();
    });

    searchInput.addEventListener("keyup", (e) => {
      if (e.key === "Enter") {
        applySearch();
      }
    });

    // טוען את הנתונים כשפותחים את הדף
    loadAssets();
  </script>
</body>
</html>
